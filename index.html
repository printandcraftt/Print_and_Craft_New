<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Print & Craft üíú</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
transition:.3s;
}

body{
background:#f5f0ff;
color:#333;
overflow-x:hidden;
}

/* NAV */
nav{
background:white;
padding:15px 20px;
display:flex;
justify-content:space-between;
align-items:center;
position:sticky;
top:0;
z-index:1000;
box-shadow:0 5px 15px rgba(0,0,0,0.05);
}

.logo{
font-weight:800;
font-size:18px;
color:#6a00f4;
}

nav ul{
list-style:none;
display:flex;
gap:20px;
align-items:center;
}

nav a{
text-decoration:none;
color:#6a00f4;
font-weight:600;
font-size:14px;
}

#darkToggle{
background:#6a00f4;
color:white;
border:none;
padding:6px 14px;
border-radius:20px;
cursor:pointer;
}

/* HERO */
.hero{
background:linear-gradient(135deg,#6a00f4,#9d4edd);
color:white;
text-align:center;
padding:80px 20px;
}

/* PRODUCTS */
.products{
padding:60px 20px;
text-align:center;
}

.products h2{
color:#6a00f4;
margin-bottom:40px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
gap:20px;
}

.product{
background:white;
border-radius:15px;
overflow:hidden;
box-shadow:0 10px 25px rgba(0,0,0,0.08);
}

.product img{
width:100%;
height:200px;
object-fit:cover;
}

.product h3{
margin-top:10px;
color:#6a00f4;
}

.product p{
font-size:13px;
padding:0 15px 15px;
color:#555;
}

.view-btn{
background:#6a00f4;
color:white;
padding:14px 30px;
border-radius:30px;
text-decoration:none;
display:inline-block;
margin-top:40px;
}

/* REVIEWS */
.reviews-section{
padding:60px 20px;
text-align:center;
background:white;
}

.review-card{
background:#f5f0ff;
padding:20px;
border-radius:15px;
margin-bottom:20px;
}

.stars{
display:flex;
justify-content:center;
gap:8px;
}

.stars span{
font-size:22px;
cursor:pointer;
opacity:0.4;
}

.stars span.active{
opacity:1;
}

/* PROMO */
.promo-overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,0.6);
display:flex;
justify-content:center;
align-items:center;
z-index:9999;
}

.promo-box{
background:#ffffff;
color:#000;
width:340px;
padding:25px;
border-radius:20px;
text-align:center;
position:relative;
transition:0.3s;
}

/* DARK MODE POPUP */
body.dark .promo-box{
background:#1e1e1e;
color:#ffffff;
}
.close-btn{
position:absolute;
right:15px;
top:10px;
font-size:22px;
cursor:pointer;
color:#6a00f4;
}

.result-box{
margin-top:15px;
font-weight:600;
}

#spinBtn{
margin-top:10px;
padding:10px 20px;
border:none;
border-radius:25px;
background:#6a00f4;
color:white;
cursor:pointer;
font-weight:600;
}

footer{
background:#6a00f4;
color:white;
text-align:center;
padding:30px;
margin-top:60px;
}

/* DARK MODE */
body.dark{
background:#121212;
color:#f1f1f1;
}
body.dark nav,
body.dark footer{
background:#1e1e1e;
}
body.dark .product,
body.dark .review-card{
background:#1f1f1f !important;
color:#fff !important;
}

body.dark .reviews-section{
background:#121212 !important;
}

body.dark input,
body.dark textarea{
background:#2a2a2a;
color:white;
border:1px solid #444;
}
  @media(max-width:600px){

.hero{
padding:60px 15px;
}

.products{
padding:40px 15px;
}

.grid{
grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
gap:15px;
}

.product img{
height:160px;
}

.promo-box{
width:90%;
}

.wheel{
width:220px;
height:220px;
}

}

</style>
</head>
<body>
<!-- NAVIGATION -->
<nav>
  <div class="logo">Print & Craft üíú</div>
  <ul>
    <li><a href="products.html">Products</a></li>
    <li><a href="reviews.html">All Reviews</a></li>
    <li><button onclick="openPromo()" style="background:#ff006e;color:white;border:none;padding:6px 14px;border-radius:20px;cursor:pointer;">üéÅPromo</button></li>
    <li><button id="darkToggle">üåô</button></li>
  </ul>
</nav>

<!-- HERO -->
<section class="hero">
  <h1>Handmade Gifts That Speak Love üíú</h1>
  <p>Create unforgettable memories with our custom crafts made with heart and passion.</p>
</section>

<!-- PRODUCTS -->
<section class="products">
  <h2>Our Products ‚ú®</h2>

  <div class="grid">

    <div class="product">
      <img src="images/bouquet/Bouquet.jpg">
      <h3>Fuzzywire Bouquet</h3>
      <p>Handmade fuzzy wire flower bouquet perfect for birthdays and surprises.</p>
    </div>

    <div class="product">
      <img src="images/polaroid/Polaroid.jpg">
      <h3>Polaroid Prints</h3>
      <p>High-quality polaroid prints to capture your best memories.</p>
    </div>

    <div class="product">
      <img src="images/box set/Box set.jpg">
      <h3>Polaroid Box Set</h3>
      <p>Complete 45-piece custom polaroid collection inside a premium gift box.</p>
    </div>

    <div class="product">
      <img src="images/bracelet/Bracelet.jpg">
      <h3>Bracelet</h3>
      <p>Customized beaded bracelets for couples and loved ones.</p>
    </div>

    <div class="product">
      <img src="images/keychain/Keychain.jpg">
      <h3>Keychain</h3>
      <p>Personalized keychains to carry your favorite photo everywhere.</p>
    </div>

    <div class="product">
      <img src="images/frame/Frame.jpg">
      <h3>Photo Frame</h3>
      <p>Spotify-style music photo frame gift idea for special occasions.</p>
    </div>

    <div class="product">
      <img src="images/Photostrips/PhotoStrips.jpg">
      <h3>Photostrips</h3>
      <p>Mini photo booth strips perfect for cute and fun memories.</p>
    </div>

  </div>

  <a href="products.html" class="view-btn">View All Products üíú</a>
</section>

<!-- REVIEWS -->
<section class="reviews-section">
  <h2>Customer Feedback üíú</h2>

  <div style="font-weight:600;margin-bottom:20px;">
    Average Rating: <span id="averageRating">0.0</span> ‚≠ê
  </div>

  <div id="reviewsContainer"></div>

  <a href="reviews.html" class="view-btn" style="margin-top:20px;">View All Reviews üíú</a>

  <h3 style="margin-top:40px;">Leave a Review ‚ú®</h3>

  <form id="reviewForm" style="max-width:400px;margin:20px auto;display:flex;flex-direction:column;gap:15px;">
    <input type="text" id="name" placeholder="Your Name" required style="padding:12px;border-radius:10px;border:1px solid #ddd;">
    
    <div class="stars">
      <span data-value="1">‚≠ê</span>
      <span data-value="2">‚≠ê</span>
      <span data-value="3">‚≠ê</span>
      <span data-value="4">‚≠ê</span>
      <span data-value="5">‚≠ê</span>
    </div>

    <textarea id="reviewText" placeholder="Write your review..." required style="padding:12px;border-radius:10px;border:1px solid #ddd;"></textarea>

    <button type="submit" style="padding:12px;border:none;border-radius:25px;background:#6a00f4;color:white;font-weight:600;">
      Submit Review üíú
    </button>
  </form>
</section>

<!-- PROMO POPUP -->
<div id="promoPopup" class="promo-overlay" style="display:none;">
  <div class="promo-box">

    <div class="close-btn" onclick="closePromo()">‚úï</div>

    <h3>Try Your Luck üéÅ</h3>

    <button id="spinBtn">Try My Luck</button>

    <div id="resultBox" class="result-box"></div>

  </div>
</div>

<footer>
  <p>Made with üíú by Print & Craft</p>
</footer>
<script type="module">

/* ================= FIREBASE IMPORT ================= */
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
import { 
  getFirestore, 
  collection, 
  addDoc, 
  getDocs, 
  query, 
  orderBy 
} from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

/* ================= FIREBASE CONFIG ================= */
const firebaseConfig = {
  apiKey: "AIzaSyCCMd6565SLeJx0zCM5h8bkj5UzSBZeQcA",
  authDomain: "print-craft-9d708.firebaseapp.com",
  projectId: "print-craft-9d708",
  storageBucket: "print-craft-9d708.firebasestorage.app",
  messagingSenderId: "873230926106",
  appId: "1:873230926106:web:464e08d3ce7d111b6aeca3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ================= DARK MODE ================= */
const toggle = document.getElementById("darkToggle");

if(localStorage.getItem("darkMode") === "enabled"){
  document.body.classList.add("dark");
}

toggle.addEventListener("click",()=>{
  document.body.classList.toggle("dark");
  localStorage.setItem("darkMode",
    document.body.classList.contains("dark") ? "enabled" : "disabled"
  );
});

/* ================= REVIEW SYSTEM ================= */

let selectedRating = 0;
const stars = document.querySelectorAll(".stars span");

stars.forEach(star=>{
  star.addEventListener("click",()=>{
    selectedRating = star.dataset.value;
    stars.forEach(s=>s.classList.remove("active"));
    for(let i=0;i<selectedRating;i++){
      stars[i].classList.add("active");
    }
  });
});

function maskName(name){
  if(name.length <= 2) return name;
  return name.substring(0,2) + "****";
}

async function loadReviews(){

  const container = document.getElementById("reviewsContainer");
  container.innerHTML = "";

  let total = 0;
  let count = 0;

  const q = query(
    collection(db,"reviews"),
    orderBy("createdAt","desc")
  );

  const snapshot = await getDocs(q);

  const docs = snapshot.docs.slice(0,3);

  docs.forEach(doc=>{
    const review = doc.data();
    total += review.rating;
    count++;

    container.innerHTML += `
      <div style="background:#f5f0ff;padding:20px;border-radius:15px;margin-bottom:15px;">
        <h4 style="color:#6a00f4;">${maskName(review.name)}</h4>
        <p>${"‚≠ê".repeat(review.rating)}</p>
        <p>${review.text}</p>
      </div>
    `;
  });

  if(count > 0){
    document.getElementById("averageRating").innerText =
      (total / count).toFixed(1);
  }
}

loadReviews();

document.getElementById("reviewForm")
.addEventListener("submit", async function(e){

  e.preventDefault();

  if(selectedRating == 0){
    alert("Please select rating ‚≠ê");
    return;
  }

  await addDoc(collection(db,"reviews"),{
    name: document.getElementById("name").value,
    rating: parseInt(selectedRating),
    text: document.getElementById("reviewText").value,
    createdAt: new Date()
  });

  document.getElementById("reviewForm").reset();
  stars.forEach(s=>s.classList.remove("active"));
  selectedRating = 0;

  loadReviews();
});
/* ================= SIMPLE TRY YOUR LUCK ================= */

const popup = document.getElementById("promoPopup");
const spinBtn = document.getElementById("spinBtn");
const resultBox = document.getElementById("resultBox");

/* Open popup automatically */
window.addEventListener("load",()=>{
  popup.style.display = "flex";
});

/* Open from navbar button */
window.openPromo = function(){
  popup.style.display = "flex";
}

/* Close popup */
window.closePromo = function(){
  popup.style.display = "none";
}

spinBtn.addEventListener("click", async ()=>{

  const today = new Date().toDateString();

  /* 1 try per day */
  if(localStorage.getItem("spinDate") === today){
    resultBox.innerHTML = `
     <p style="font-weight:600;">
        üéÅ You already tried today! Come back tomorrow.
      </p>
    `;
    return;
  }

  let win = Math.random() < 0.5; // 50% chance
  let discount = null;

  if(win){

    const prizeRand = Math.random();

    if(prizeRand < 0.55){
      discount = 10;
    }else if(prizeRand < 0.85){
      discount = 5;
    }else{
      discount = 20; // rare
    }

    const code = "PC" + Math.random().toString(36).substring(2,8).toUpperCase();

    resultBox.innerHTML = `
      <h3 style="color:#6a00f4;">üéâ CONGRATULATIONS!</h3>
      <p>You won <strong>${discount}% OFF</strong></p>
      <p>Your Code:</p>
      <h2 style="color:#ff006e;">${code}</h2>
      <p>üì∏ Screenshot this and message us!</p>
    `;

    startConfetti();
    firework();

    await addDoc(collection(db,"promo_winners"),{
      code: code,
      discount: discount,
      createdAt: new Date()
    });

  }else{

    resultBox.innerHTML = `
      <h3 style="color:#6a00f4;">üò¢ Not this time!</h3>
      <p>Try again tomorrow üíú</p>
    `;

  }

  localStorage.setItem("spinDate", today);

});

</script>
<!-- ================= CONFETTI CANVAS ================= -->
<canvas id="confettiCanvas" style="
position:fixed;
top:0;
left:0;
width:100%;
height:100%;
pointer-events:none;
z-index:99999;
"></canvas>

<script>

/* ================= CONFETTI ================= */
const canvas = document.getElementById("confettiCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let confettiPieces = [];

function createConfetti(){
  for(let i=0;i<150;i++){
    confettiPieces.push({
      x: Math.random()*canvas.width,
      y: Math.random()*canvas.height - canvas.height,
      size: Math.random()*8+4,
      speed: Math.random()*3+2,
      color: `hsl(${Math.random()*360},100%,50%)`
    });
  }
}

function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  confettiPieces.forEach(p=>{
    ctx.fillStyle = p.color;
    ctx.fillRect(p.x,p.y,p.size,p.size);
    p.y += p.speed;
  });
}

function startConfetti(){
  createConfetti();
  let duration = 2000;
  let start = Date.now();

  function animate(){
    drawConfetti();
    if(Date.now()-start < duration){
      requestAnimationFrame(animate);
    }else{
      confettiPieces=[];
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }
  }

  animate();
}

/* ================= FIREWORK EFFECT ================= */
function firework(){
  const explosion = document.createElement("div");
  explosion.style.position="fixed";
  explosion.style.width="20px";
  explosion.style.height="20px";
  explosion.style.borderRadius="50%";
  explosion.style.background="radial-gradient(circle,#ff006e,#6a00f4)";
  explosion.style.left="50%";
  explosion.style.top="50%";
  explosion.style.transform="translate(-50%,-50%) scale(0)";
  explosion.style.zIndex="99998";
  explosion.style.transition="transform .6s ease-out, opacity .6s";
  document.body.appendChild(explosion);

  setTimeout(()=>{
    explosion.style.transform="translate(-50%,-50%) scale(20)";
    explosion.style.opacity="0";
  },50);

  setTimeout(()=>{
    explosion.remove();
  },700);
}
/* ================= MOBILE RESPONSIVE FIX ================= */
window.addEventListener("resize",()=>{
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});

</script>

</body>
</html>
